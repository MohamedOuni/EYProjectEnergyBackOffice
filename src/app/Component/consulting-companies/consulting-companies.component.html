<app-sidebar></app-sidebar>
<div class="main-content">
  <div class="dashboard-header">
    <h1 style="color: #ffd700;">Consultant Dashboard</h1>
  </div>
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-header">Total Companies</div>
      <div class="stat-value">{{ companies.length }}</div>
    </div>
    <div class="stat-card">
      <div class="stat-header">Total Responses</div>
      <div class="stat-value">{{ totalResponses }}</div>
    </div>
  </div>
  <div class="table-container">
    <p-table [value]="companies">
      <ng-template pTemplate="header">
        <tr class="table-header">
          <th>Company Name</th>
          <th>Customer Name</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-company>
        <tr>
          <td>{{ company.name }}</td>
          <td>{{ company.customerName}}</td>
          <td>
  <button pButton type="button" label="View Responses" icon="pi pi-eye" (click)="viewResponses(company)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <p-dialog header="Responses" [(visible)]="displayResponsesDialog" [modal]="true" [style]="{ width: '70vw' }" (onHide)="displayResponsesDialog = false">
    <p-table [value]="responses">
      <ng-template pTemplate="header">
        <tr class="table-header">
          <th>Question</th>
          <th>Response</th>
          <th>File</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-response>
        <tr>
          <td>{{ response.questionText }}</td>
          <td>{{ response.responseText }}</td>
          <td>{{ response.fileId ? 'Yes' : 'No' }}</td>
        </tr>
      </ng-template>
    </p-table>
    <p-footer>
      <button type="button" pButton class="p-button-rounded ey-button" label="Export to PDF" (click)="exportToPdf()"></button>
    </p-footer>
  </p-dialog>
</div>
